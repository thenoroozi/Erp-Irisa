// import {Disturbution} from "./data.js";
const Disturbution = [{
      id: 1,
      project: "یکپارچه‌سازی سیستم کنترل دسترس",
      organization: "مدیریت کسب و کار مدیریت تحول دیجیتال",
      projectManager: "میلاد هلاچیان",
      projectNumber: 999,
      projectStartDate: "1394/11/14",
      projectFinishDate: "1399/07/02",
      projectType: "Cost/Event(NIS)",
      status: "Executive",
      customer: "فولاد مبارکه",
   },
   {
      id: 2,
      project: "نگهداری شبکه فولاد خراسان 98-99",
      organization: "مدیریت کسب و کار شبکه و زیرساخت",
      projectManager: "ساسان عبداله زاده",
      projectNumber: 996,
      projectStartDate: "1394/11/14",
      projectFinishDate: "1399/06/31",
      projectType: "Cost/Event(NIS)",
      status: "pending close",
      customer: "فولاد خراسان",
   },
   {
      id: 3,
      project: "توسعه فناوری RFID فولاد مبارکه",
      organization: "مدیریت کسب و کار شبکه و زیرساخت",
      projectManager: "رضا اخوان",
      projectNumber: 994,
      projectStartDate: "1394/11/14",
      projectFinishDate: "1396/06/08",
      projectType: "Event/Event(NIS)",
      status: "pending close",
      customer: "فولاد مبارکه",
   },
   {
      id: 4,
      project: "تامین تجهیزات موردی مبارکه",
      organization: "مدیریت کسب و کار شبکه و زیرساخت",
      projectManager: "ساسان عبداله زاده",
      projectNumber: 983,
      projectStartDate: "1394/11/14",
      projectFinishDate: "1399/06/01",
      projectType: "Event/Event(NIS)",
      status: "pending close",
      customer: "فولاد مبارکه",
   },
   {
      id: 5,
      project: "توسعه سیستمهای نوین مبارکه 98",
      organization: "مدیریت کسب و کار سیستم های اطلاعاتی",
      projectManager: "مسیح حاجی صادقیان",
      projectNumber: 952,
      projectStartDate: "1398/01/05",
      projectFinishDate: "1702/03/06",
      projectType: "Cost/Event(IS)",
      status: "Executive",
      customer: "فولاد مبارکه",
   },
   {
      id: 6,
      project: "نگهداری شبکع فولاد سفیددشت 98",
      organization: "مدیریت کسب و کارشبکه و زیر ساخت",
      projectManager: "سینا ایرانپور",
      projectNumber: 943,
      projectStartDate: "1398/01/01",
      projectFinishDate: "1700/06/12",
      projectType: "Event/Event(NIS)",
      status: "pending close",
      customer: "شرکت فولاد سفید دشت چهارمحال بختیاری",
   },
   {
      id: 7,
      project: "اسکادا سیالات فولاد مبارکه",
      organization: "مدیریت کسب و کار اتوماسیون صنعتی",
      projectManager: "احسان عبداله زاده",
      projectNumber: 937,
      projectStartDate: "1394/11/14",
      projectFinishDate: "1398/11/14",
      projectType: "Cost/Event(AUT)",
      status: "pending close",
      customer: "فولاد مبارکه",
   },
   {
      id: 8,
      project: "دوبلیکشین سیکنالهای نورد سیاه",
      organization: "مدیریت کسب و کار اتوماسیون صنعتی",
      projectManager: "مهرداد صفاری پور",
      projectNumber: 932,
      projectStartDate: "1397/11/01",
      projectFinishDate: "1398/11/14",
      projectType: "Cost/Event(AUT)",
      status: "pending close",
      customer: "فولاد مبارکه",
   },
   {
      id: 9,
      project: " امیر کبیر کاشان CGL سیستم کنترل ",
      organization: "مدیریت کسب و کار اتوماسیون صنعتی",
      projectManager: "شاهین خسرویان",
      projectNumber: 905,
      projectStartDate: "1397/06/10",
      projectFinishDate: "1398/04/01",
      projectType: "Cost/Event(AUT)",
      status: "pending close",
      customer: "فولاد امیرکبیر کاشان",
   },
   {
      id: 10,
      project: "درایوهای نورد گرم فولاد مبارکه",
      organization: "مدیریت کسب و کار اتوماسیون صنعتی",
      projectManager: "علی طالبی",
      projectNumber: 901,
      projectStartDate: "1397/05/01",
      projectFinishDate: "1399/12/10",
      projectType: "Cost/Event(AUT)",
      status: "Executive",
      customer: "شرکت ایراسکو",
   },
   {
      id: 11,
      project: "دارایی ثابت",
      organization: "شرکت ایریسا",
      projectManager: "ایرج فخری",
      projectNumber: 900,
      projectStartDate: "1398/03/19",
      projectFinishDate: "1419/03/20",
      projectType: "capital",
      status: "submitted",
      customer: "",
   },
   {
      id: 12,
      project: "طراحی campus فولاد مبارکه",
      organization: "مدیریت کسب و کارشبکه و زیر ساخت",
      projectManager: "سینا ایرانپور",
      projectNumber: 872,
      projectStartDate: "1397/01/01",
      projectFinishDate: "1400/01/17",
      projectType: "Cost/Event(NIS)",
      status: "Executive",
      customer: "فولاد مبارکه",
   },
   {
      id: 13,
      project: "اتوماسیون سطح سه فولاد سیا",
      organization: "مدیریت کسب و کار اتوماسیون صنعتی",
      projectManager: "مسعود اعظمی بیرانوند",
      projectNumber: 861,
      projectStartDate: "1396/12/01",
      projectFinishDate: "1398/12/28",
      projectType: "Cost/Event(AUT)",
      status: "Executive",
      customer: "فولاد مبارکه",
   },
];
//hover on icons in header
const notificationIcon = document.querySelector(".notife-icon");
const homeIcon = document.querySelector(".home-icon");
const starIcon = document.querySelector(".star-icon");


function hoverIcon(event) {
   if (event == 1) {
      starIcon.style.backgroundColor = "#cbe7ff";
      starIcon.children[0].src = './image/icon/starLight.png';

   } else if (event == 2) {
      homeIcon.style.backgroundColor = "#cbe7ff";
      homeIcon.children[0].src = './image/icon/home-24-blue.png';
   } else if (event == 3) {

      notificationIcon.style.backgroundColor = "#cbe7ff";
      notificationIcon.children[0].src = './image/icon/notification-blue.png';
   }
}

function leaveIcon() {
   notificationIcon.style.backgroundColor = "white";
   notificationIcon.children[0].src = './image/icon/notification.png';

   homeIcon.style.backgroundColor = "white";
   homeIcon.children[0].src = './image/icon/home-24.png';

   starIcon.style.backgroundColor = "white";
   starIcon.children[0].src = './image/icon/starOff.png';
}

//Toggle menu
const toggleUserMenu = document.querySelector('.userMenu');
const toggleNotifeMenu = document.querySelector('.notifeMenu');
const toggleFavoriteMenu = document.querySelector('.favoriteMenu')

function ToggleMenu(event) {
   if (event == 1) {
      toggleNotifeMenu.classList.toggle('active');
      toggleFavoriteMenu.classList.remove('active');
   } else if (event == 2) {
      toggleUserMenu.classList.toggle('active');
   } else if (event == 3) {
      toggleFavoriteMenu.classList.toggle('active');
      toggleNotifeMenu.classList.remove('active');
   }
}

//access list toggle menu
function ChangeStar(list, num) {
   const star = document.querySelector(".list-" + list + "-star-" + num);
   if (star.src.indexOf('starOff.png') != -1) {
      star.src = './image/icon/starLight.png';

   } else {
      star.src = './image/icon/starOff.png';

   }
}

function openList(event) {
   let arrow = document.querySelector("#arrow-left-" + event);
   let list = document.querySelector(".list-" + event);

   arrow.classList.toggle('active');
   list.classList.toggle("active");
}
//open next page list
const mainList = document.querySelector('.mainList');

function openNextPage(event) {
   let subList = document.querySelector(".subList-" + event);

   mainList.classList.add('active');
   subList.classList.add('active');
}

function back(event1, page) {
   let subList = document.querySelector(".subList-" + event1);
   if (page == 1) {
      mainList.classList.remove('active');
      subList.classList.remove('active');
   }
}

//box options
function openBoxOption(event) {
   const boxOption = document.querySelector('.box-options-' + event);
   console.log(boxOption);
   boxOption.classList.toggle('active');
}
//when access list become steady
function steadyAccessList() {
   const body = document.querySelector('#body');
   const dashboardCard = document.querySelectorAll('.dashboard-card');
   const box = document.querySelectorAll('.box');
   const main = document.querySelector('.main');
   const functions = document.querySelector('.functions');
   const dashboard = document.querySelector('.dashboard');
   const accessMenu = document.querySelector('.accessMenu');
   const steadyIcon = document.querySelector('.steady-icon');
   const accessListTopic = document.querySelector('.accessList-topic');
   const functionsItem = document.querySelector('.functions-item');

   body.classList.toggle('steady');
   for (let i = 0; i < dashboardCard.length; i++) {
      dashboardCard[i].classList.toggle('steady');

   }
   for (let i = 0; i < box.length; i++) {
      box[i].classList.toggle('steady');
   }
   main.classList.toggle('steady');
   dashboard.classList.toggle('steady');
   accessMenu.classList.toggle('steady');
   steadyIcon.classList.toggle('steady');
   functions.classList.toggle('steady');
   accessListTopic.classList.toggle('steady');
   functionsItem.classList.toggle('steady');
}
//building the function lists table
function openFunctionList(event) {
   const functionsItem = document.querySelector('.functions-item');
   functionsItem.style.display = "none";

   const main = document.querySelector('.main');
   const functions = document.querySelector('.functions');
   let tHeader = document.querySelector('.theader');
   let tBody = document.querySelector('.functions-tbody');
   main.style.display = "none";
   functions.style.display = "flex";
   tHeader.innerHTML = "";
   tBody.innerHTML = "";

   fetch(`https://jsonplaceholder.typicode.com/${event}/`)
      .then(response => response.json())
      .then(json => {
         let Keys = [];
         for (const x in json[0]) {
            Keys.push(x);
         }
         //table header
         let tableHeaderTr = `<td>select</td>`;
         let trHead = document.createElement("tr");
         for (let i = 1; i < Keys.length; i++) {
            tableHeaderTr += `<td>${Keys[i]}</td>`;
         }
         trHead.innerHTML = tableHeaderTr;
         tHeader.appendChild(trHead);
         //table body
         for (let j = 0; j < json.length; j++) {
            let trBody = document.createElement("tr");
            trBody.innerHTML = ``;
            let tableBodyTr = `<td><input type="checkbox" name="checkbox"></td>`;
            for (let i = 1; i < Keys.length; i++) {
               tableBodyTr += `<td>${json[j][Keys[i]]}</td>`;
            }
            trBody.innerHTML = tableBodyTr;
            tBody.append(trBody);
         }

      })
}

function openFunctionListJs() {
   const functionsItem = document.querySelector('.functions-item');
   functionsItem.style.display = "none";
   
   const main = document.querySelector('.main');
   const functions = document.querySelector('.functions');
   let tHeader = document.querySelector('.theader');
   let tBody = document.querySelector('.functions-tbody');
   main.style.display = "none";
   functions.style.display = "flex";
   tHeader.innerHTML = "";
   tBody.innerHTML = "";

   let Keys = [];
   for (const x in Disturbution[0]) {
      Keys.push(x);
   }
   //table header
   let tableHeaderTr = `<td>select</td>`;
   let trHead = document.createElement("tr");
   for (let i = 1; i < Keys.length; i++) {
      tableHeaderTr += `<td>${Keys[i]}</td>`;
   }
   trHead.innerHTML = tableHeaderTr;
   tHeader.appendChild(trHead);

   //table body
   Disturbution.map(project => {
      let trBody = document.createElement("tr");
      trBody.innerHTML = ``;
      let tableBodyTr = `<td><input type="checkbox" name="checkbox"></td>`;
      for (let i = 1; i < Keys.length; i++) {
         if (i == 1) {
            tableBodyTr += `<td><a href="#" onclick="openFunctionItem('${project.id}')">${project[Keys[i]]}</a></td>`;
         } else {
            tableBodyTr += `<td>${project[Keys[i]]}</td>`;
         }
      }
      trBody.innerHTML = tableBodyTr;
      tBody.append(trBody);

   })
}
//select items in table
function changeSelect() {
   const selectAll = document.querySelector(".select-btn").childNodes[0];
   const tr = document.getElementsByName("checkbox");

   if (selectAll.src.indexOf("select-none-30.png") != -1) {
      document.querySelector(".select-btn").childNodes[0].src = './image/icon/select-30.png';
      for (let i = 0; i < tr.length; i++) {
         tr[i].checked = true;
      }
   } else {
      document.querySelector(".select-btn").childNodes[0].src = './image/icon/select-none-30.png';
      for (let i = 0; i < tr.length; i++) {
         tr[i].checked = false;
      }
   }
}
///open home
function openHome() {
   const main = document.querySelector('.main');
   const functions = document.querySelector('.functions');
   const functionsItem = document.querySelector('.functions-item');

   main.style.display = "flex";
   functionsItem.style.display = "none";
   functions.style.display = "none";
}

//open function item page ----------------------------------
function openFunctionItem(event) {
   const functionsItem = document.querySelector('.functions-item');
   const functions = document.querySelector('.functions');

   functions.style.display = "none";
   functionsItem.style.display = "flex";

   const projectSpecifications=document.querySelector(".project-specifications");
   projectSpecifications.innerHTML=``;
   let topic=document.querySelector('.project-topic');
   topic.innerHTML=``;
   let Keys = [];
   for (const x in Disturbution[0]) {
      Keys.push(x);
   }
   Disturbution.map(project =>{
      if(project.id==event){
         topic.innerHTML=`${Keys[1]} : <h3>${project[Keys[1]]}</h3>`;
         
         for (let i = 2; i < Keys.length; i++) {
            let li = document.createElement("li");
            li.innerHTML = `<label>${Keys[i]} : </label>
            <h4> ${project[Keys[i]]} </h4>`;
            projectSpecifications.appendChild(li);
         }
      }
   })
}

let previousPageClass='';
let previousPage=document.querySelector(".functions-project");

function openFunctionItemPage(event) {
   const project = document.querySelector('.functions-project');
   const resources = document.querySelector('.functions-resources');
   const workpkan = document.querySelector('.functions-workpkan');
   const reporting = document.querySelector('.functions-reporting');
   const financial = document.querySelector('.functions-financial');
   const procurement = document.querySelector('.functions-procurement');
   const cotrol = document.querySelector('.functions-cotrol');

   switch (event) {
      case 1:
         previousPage.style.display="none";
         project.style.display = "block";
         previousPageClass=project.className;
         previousPage=document.querySelector(`.${previousPageClass}`);
         break;
      case 2:
         previousPage.style.display="none";
         resources.style.display = "block";
         previousPageClass=resources.className;
         previousPage=document.querySelector(`.${previousPageClass}`);
         break;
      case 3:
         previousPage.style.display="none";
         workpkan.style.display = "block";
         previousPageClass=workpkan.className;
         previousPage=document.querySelector(`.${previousPageClass}`);
         break;
      case 4:
         previousPage.style.display="none";
         cotrol.style.display = "block";
         previousPageClass=cotrol.className;
         previousPage=document.querySelector(`.${previousPageClass}`);
         break;
      case 5:
         previousPage.style.display="none";
         financial.style.display = "block";
         previousPageClass=financial.className;
         previousPage=document.querySelector(`.${previousPageClass}`);
         break;
      case 6:
         previousPage.style.display="none";
         reporting.style.display = "block";
         previousPageClass=reporting.className;
         previousPage=document.querySelector(`.${previousPageClass}`);
         break;
      case 7:
         previousPage.style.display="none";
         procurement.style.display = "block";
         previousPageClass=procurement.className;
         previousPage=document.querySelector(`.${previousPageClass}`);
         break;
   }
}